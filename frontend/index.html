<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ‹å‹åœˆåˆ†æäº¤å‹åŠ©æ‰‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 40px;
        }
        
        h1 {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 30px;
        }
        
        .instructions {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .instructions h3 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .instructions ul {
            list-style-type: disc;
            padding-left: 20px;
            color: #666;
        }
        
        .upload-area {
            background: white;
            border: 2px dashed #ddd;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-area:hover {
            border-color: #ff6b6b;
            background-color: #f9f9f9;
        }
        
        .upload-area.dragover {
            border-color: #4ecdc4;
            background-color: #f0f9f8;
        }
        
        .upload-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #ddd;
        }
        
        .upload-text {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .upload-subtext {
            font-size: 0.9rem;
            color: #999;
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .image-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            aspect-ratio: 1;
        }
        
        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .image-item:hover img {
            transform: scale(1.1);
        }
        
        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 107, 107, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .delete-btn:hover {
            background: rgba(255, 107, 107, 1);
            transform: scale(1.1);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: bold;
            text-decoration: none;
            border-radius: 50px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            outline: none;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .image-count {
            font-size: 1rem;
            color: #666;
        }
        
        .error-message {
            background: rgba(255, 107, 107, 0.1);
            color: #ff6b6b;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }
        
        .analysis-section {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .loading-animation {
            text-align: center;
            margin: 40px 0;
        }
        
        .spinner {
            width: 80px;
            height: 80px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #ff6b6b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 30px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #f3f3f3;
            border-radius: 5px;
            overflow: hidden;
            margin: 30px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .report-section {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .report-section h2 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
        }
        
        .report-section h2 i {
            margin-right: 10px;
            font-size: 1.8rem;
        }
        
        .analysis-item {
            margin-bottom: 30px;
        }
        
        .analysis-item h3 {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #4ecdc4;
        }
        
        .personality-traits {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .trait-tag {
            background: #f0f9f8;
            color: #4ecdc4;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .interest-list {
            list-style-type: none;
            margin-bottom: 20px;
        }
        
        .interest-item {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
        }
        
        .interest-item::before {
            content: 'â€¢';
            color: #ff6b6b;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .advice-section {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .advice-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .advice-content {
            color: #666;
            line-height: 1.7;
        }
        
        .advice-content ul {
            list-style-type: disc;
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .advice-content li {
            margin-bottom: 8px;
        }
        
        .share-save {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            margin-bottom: 40px;
        }
        
        .share-buttons {
            display: flex;
            gap: 10px;
        }
        
        .share-btn {
            background: #f0f0f0;
            color: #333;
            padding: 10px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .share-btn:hover {
            background: #e0e0e0;
            transform: translateY(-3px);
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .upload-area {
                padding: 40px 15px;
            }
            
            .image-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 10px;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .btn {
                width: 100%;
                text-align: center;
            }
            
            .share-save {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .share-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æœ‹å‹åœˆåˆ†æäº¤å‹åŠ©æ‰‹</h1>
            <p class="subtitle">ä¸Šä¼ æœ‹å‹åœˆæˆªå›¾ï¼ŒAIä¸ºä½ åˆ†æå¯¹æ–¹ï¼ŒåŠ©ä½ å¿«é€Ÿå»ºç«‹å…³ç³»</p>
        </header>
        
        <div class="instructions">
            <h3>ä½¿ç”¨è¯´æ˜ï¼š</h3>
            <ul>
                <li>è‡³å°‘ä¸Šä¼ 5å¼ æœ‹å‹åœˆæˆªå›¾</li>
                <li>å›¾ç‰‡æ ¼å¼æ”¯æŒï¼šJPGã€PNGã€WEBP</li>
                <li>æ¯å¼ å›¾ç‰‡å¤§å°ä¸è¶…è¿‡10MB</li>
                <li>ç¡®ä¿å›¾ç‰‡æ¸…æ™°å¯è§ï¼ŒåŒ…å«å®Œæ•´çš„æœ‹å‹åœˆå†…å®¹</li>
            </ul>
        </div>
        
        <div class="error-message" id="errorMessage"></div>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">ğŸ“</div>
            <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„ä¸Šä¼ </div>
            <div class="upload-subtext">æ”¯æŒæ‰¹é‡ä¸Šä¼ </div>
            <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
        </div>
        
        <div class="image-grid" id="imageGrid">
            <!-- ä¸Šä¼ çš„å›¾ç‰‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
        
        <div class="controls">
            <div class="image-count" id="imageCount">å·²ä¸Šä¼ ï¼š0/5</div>
            <button class="btn btn-primary" id="analyzeBtn" disabled onclick="startAnalysis()">å¼€å§‹åˆ†æ</button>
        </div>
        
        <div class="analysis-section" id="analysisSection">
            <h2>åˆ†æä¸­...</h2>
            <div class="loading-animation">
                <div class="spinner"></div>
                <p>æ­£åœ¨åˆ†ææœ‹å‹åœˆå†…å®¹ï¼Œè¯·ç¨å€™...</p>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="estimatedTime">é¢„è®¡å‰©ä½™æ—¶é—´ï¼š15ç§’</p>
        </div>
        
        <div class="report-section" id="reportSection">
            <h2>ğŸ‘¤ åˆ†ææŠ¥å‘Š</h2>
            
            <div class="analysis-item">
                <h3>æ€§æ ¼ç‰¹ç‚¹</h3>
                <div class="personality-traits" id="personalityTraits">
                    <!-- æ€§æ ¼æ ‡ç­¾å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>
            
            <div class="analysis-item">
                <h3>å…´è¶£çˆ±å¥½</h3>
                <ul class="interest-list" id="interestList">
                    <!-- å…´è¶£çˆ±å¥½å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </ul>
            </div>
            
            <div class="analysis-item">
                <h3>ç”Ÿæ´»æ–¹å¼</h3>
                <p id="lifestyle">
                    <!-- ç”Ÿæ´»æ–¹å¼å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </p>
            </div>
            
            <div class="analysis-item">
                <h3>ç¤¾äº¤åå¥½</h3>
                <p id="socialPreference">
                    <!-- ç¤¾äº¤åå¥½å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </p>
            </div>
            
            <div class="analysis-item">
                <h3>ğŸ’– äº¤å‹å»ºè®®</h3>
                
                <div class="advice-section">
                    <h4 class="advice-title">è¯é¢˜æ¨è</h4>
                    <div class="advice-content">
                        <ul id="topicAdvice">
                            <!-- è¯é¢˜æ¨èå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </ul>
                    </div>
                </div>
                
                <div class="advice-section">
                    <h4 class="advice-title">çº¦ä¼šå»ºè®®</h4>
                    <div class="advice-content">
                        <ul id="datingAdvice">
                            <!-- çº¦ä¼šå»ºè®®å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </ul>
                    </div>
                </div>
                
                <div class="advice-section">
                    <h4 class="advice-title">æ²Ÿé€šæŠ€å·§</h4>
                    <div class="advice-content">
                        <ul id="communicationAdvice">
                            <!-- æ²Ÿé€šæŠ€å·§å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </ul>
                    </div>
                </div>
                
                <div class="advice-section">
                    <h4 class="advice-title">å…³ç³»è¿›å±•</h4>
                    <div class="advice-content">
                        <p id="relationshipAdvice">
                            <!-- å…³ç³»è¿›å±•å»ºè®®å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="share-save">
                <div class="share-buttons">
                    <button class="share-btn" onclick="shareReport('wechat')">å¾®ä¿¡åˆ†äº«</button>
                    <button class="share-btn" onclick="shareReport('weibo')">å¾®åšåˆ†äº«</button>
                    <button class="share-btn" onclick="saveReport()">ä¿å­˜æŠ¥å‘Š</button>
                </div>
                <button class="btn btn-primary" onclick="resetForm()">é‡æ–°åˆ†æ</button>
            </div>
        </div>
        
        <footer class="footer">
            <p>Â© 2026 æœ‹å‹åœˆåˆ†æäº¤å‹åŠ©æ‰‹ | ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œå®‰å…¨å¯é </p>
        </footer>
    </div>
    
    <script>
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const imageGrid = document.getElementById('imageGrid');
        const imageCount = document.getElementById('imageCount');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const errorMessage = document.getElementById('errorMessage');
        const analysisSection = document.getElementById('analysisSection');
        const reportSection = document.getElementById('reportSection');
        const progressFill = document.getElementById('progressFill');
        const estimatedTime = document.getElementById('estimatedTime');
        
        let uploadedImages = [];
        
        // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        // æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            
            if (e.dataTransfer.files.length > 0) {
                handleFiles(e.dataTransfer.files);
            }
        });
        
        // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFiles(e.target.files);
            }
        });
        
        // å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶
        function handleFiles(files) {
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // æ£€æŸ¥æ–‡ä»¶ç±»å‹
                if (!file.type.startsWith('image/')) {
                    showError('è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶');
                    continue;
                }
                
                // æ£€æŸ¥æ–‡ä»¶å¤§å°
                if (file.size > 10 * 1024 * 1024) {
                    showError('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡10MB');
                    continue;
                }
                
                // è¯»å–å¹¶é¢„è§ˆå›¾ç‰‡
                const reader = new FileReader();
                reader.onload = (e) => {
                    const imageUrl = e.target.result;
                    uploadedImages.push({ file, url: imageUrl });
                    updateImageGrid();
                    updateImageCount();
                    updateAnalyzeButton();
                };
                reader.readAsDataURL(file);
            }
        }
        
        // æ›´æ–°å›¾ç‰‡ç½‘æ ¼
        function updateImageGrid() {
            imageGrid.innerHTML = '';
            
            uploadedImages.forEach((image, index) => {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                imageItem.innerHTML = `
                    <img src="${image.url}" alt="æœ‹å‹åœˆæˆªå›¾ ${index + 1}">
                    <button class="delete-btn" onclick="deleteImage(${index})">Ã—</button>
                `;
                imageGrid.appendChild(imageItem);
            });
        }
        
        // æ›´æ–°å›¾ç‰‡è®¡æ•°
        function updateImageCount() {
            imageCount.textContent = `å·²ä¸Šä¼ ï¼š${uploadedImages.length}/5`;
        }
        
        // æ›´æ–°åˆ†ææŒ‰é’®çŠ¶æ€
        function updateAnalyzeButton() {
            analyzeBtn.disabled = uploadedImages.length < 5;
        }
        
        // åˆ é™¤å›¾ç‰‡
        function deleteImage(index) {
            uploadedImages.splice(index, 1);
            updateImageGrid();
            updateImageCount();
            updateAnalyzeButton();
        }
        
        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            
            // 3ç§’åéšè—é”™è¯¯ä¿¡æ¯
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 3000);
        }
        
        // å¼€å§‹åˆ†æ
        function startAnalysis() {
            if (uploadedImages.length < 5) {
                showError('è¯·è‡³å°‘ä¸Šä¼ 5å¼ å›¾ç‰‡');
                return;
            }
            
            // æ˜¾ç¤ºåˆ†æä¸­ç•Œé¢
            uploadArea.style.display = 'none';
            imageGrid.style.display = 'none';
            document.querySelector('.controls').style.display = 'none';
            analysisSection.style.display = 'block';
            
            // æ¨¡æ‹Ÿåˆ†æè¿›åº¦
            let progress = 0;
            const totalTime = 15000; // 15ç§’
            const interval = 100;
            const step = 100 / (totalTime / interval);
            
            const timer = setInterval(() => {
                progress += step;
                if (progress > 100) progress = 100;
                
                progressFill.style.width = progress + '%';
                const remainingTime = Math.max(0, Math.round((100 - progress) / 100 * totalTime / 1000));
                estimatedTime.textContent = `é¢„è®¡å‰©ä½™æ—¶é—´ï¼š${remainingTime}ç§’`;
                
                if (progress >= 100) {
                    clearInterval(timer);
                    // æ¨¡æ‹Ÿåˆ†æå®Œæˆï¼Œæ˜¾ç¤ºæŠ¥å‘Š
                    setTimeout(() => {
                        analysisSection.style.display = 'none';
                        reportSection.style.display = 'block';
                        // åŠ è½½æ¨¡æ‹Ÿæ•°æ®
                        loadMockData();
                    }, 500);
                }
            }, interval);
            
            // å®é™…é¡¹ç›®ä¸­ï¼Œè¿™é‡Œä¼šå‘é€å›¾ç‰‡åˆ°åç«¯è¿›è¡Œåˆ†æ
            // uploadImagesToServer();
        }
        
        // ä¸Šä¼ å›¾ç‰‡åˆ°æœåŠ¡å™¨
        function uploadImagesToServer() {
            const formData = new FormData();
            
            uploadedImages.forEach((image, index) => {
                formData.append('images', image.file, `image_${index}.jpg`);
            });
            
            fetch('http://localhost:3001/api/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.message === 'å›¾ç‰‡ä¸Šä¼ æˆåŠŸ') {
                    // è°ƒç”¨åˆ†ææ¥å£
                    analyzeImages(data.files);
                } else {
                    showError('å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼š' + data.error);
                    resetForm();
                }
            })
            .catch(error => {
                console.error('ä¸Šä¼ é”™è¯¯:', error);
                showError('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•');
                resetForm();
            });
        }
        
        // åˆ†æå›¾ç‰‡
        function analyzeImages(files) {
            fetch('http://localhost:3001/api/analyze', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ files })
            })
            .then(response => response.json())
            .then(data => {
                if (data.message === 'åˆ†æå®Œæˆ') {
                    // æ˜¾ç¤ºåˆ†æç»“æœ
                    displayReport(data.result);
                } else {
                    showError('åˆ†æå¤±è´¥ï¼š' + data.error);
                    resetForm();
                }
            })
            .catch(error => {
                console.error('åˆ†æé”™è¯¯:', error);
                showError('åˆ†æå¤±è´¥ï¼Œè¯·é‡è¯•');
                resetForm();
            });
        }
        
        // æ˜¾ç¤ºåˆ†ææŠ¥å‘Š
        function displayReport(result) {
            // å¡«å……æ€§æ ¼ç‰¹ç‚¹
            const personalityTraits = document.getElementById('personalityTraits');
            personalityTraits.innerHTML = '';
            result.personality.forEach(trait => {
                const traitTag = document.createElement('span');
                traitTag.className = 'trait-tag';
                traitTag.textContent = trait;
                personalityTraits.appendChild(traitTag);
            });
            
            // å¡«å……å…´è¶£çˆ±å¥½
            const interestList = document.getElementById('interestList');
            interestList.innerHTML = '';
            result.interests.forEach(interest => {
                const li = document.createElement('li');
                li.className = 'interest-item';
                li.textContent = `${interest.name} - ${interest.description}`;
                interestList.appendChild(li);
            });
            
            // å¡«å……ç”Ÿæ´»æ–¹å¼
            document.getElementById('lifestyle').textContent = result.lifestyle;
            
            // å¡«å……ç¤¾äº¤åå¥½
            document.getElementById('socialPreference').textContent = result.socialPreference;
            
            // å¡«å……äº¤å‹å»ºè®®
            const topicAdvice = document.getElementById('topicAdvice');
            topicAdvice.innerHTML = '';
            result.advice.topics.forEach(topic => {
                const li = document.createElement('li');
                li.textContent = topic;
                topicAdvice.appendChild(li);
            });
            
            const datingAdvice = document.getElementById('datingAdvice');
            datingAdvice.innerHTML = '';
            result.advice.dating.forEach(advice => {
                const li = document.createElement('li');
                li.textContent = advice;
                datingAdvice.appendChild(li);
            });
            
            const communicationAdvice = document.getElementById('communicationAdvice');
            communicationAdvice.innerHTML = '';
            result.advice.communication.forEach(advice => {
                const li = document.createElement('li');
                li.textContent = advice;
                communicationAdvice.appendChild(li);
            });
            
            document.getElementById('relationshipAdvice').textContent = result.advice.relationship;
            
            // æ˜¾ç¤ºæŠ¥å‘ŠåŒºåŸŸ
            analysisSection.style.display = 'none';
            reportSection.style.display = 'block';
        }
        
        // åŠ è½½æ¨¡æ‹Ÿæ•°æ®
        function loadMockData() {
            const mockData = {
                personality: ['ä¹è§‚å¼€æœ—', 'çƒ­çˆ±ç”Ÿæ´»', 'æ³¨é‡ç»†èŠ‚', 'å–„äºç¤¾äº¤', 'æœ‰å¹½é»˜æ„Ÿ'],
                interests: [
                    { name: 'æ—…è¡Œ', description: 'å–œæ¬¢æ¢ç´¢æ–°åœ°æ–¹ï¼Œåˆ†äº«æ—…è¡Œè§é—»' },
                    { name: 'ç¾é£Ÿ', description: 'çƒ­è¡·äºå°è¯•å„ç§ç¾é£Ÿï¼Œåˆ†äº«æ¢åº—ä½“éªŒ' },
                    { name: 'å¥èº«', description: 'å®šæœŸé”»ç‚¼ï¼Œæ³¨é‡èº«ä½“å¥åº·' },
                    { name: 'é˜…è¯»', description: 'å–œæ¬¢é˜…è¯»å„ç±»ä¹¦ç±ï¼Œåˆ†äº«è¯»ä¹¦æ„Ÿæ‚Ÿ' },
                    { name: 'æ‘„å½±', description: 'å–œæ¬¢ç”¨é•œå¤´è®°å½•ç”Ÿæ´»ä¸­çš„ç¾å¥½ç¬é—´' }
                ],
                lifestyle: 'ç”Ÿæ´»è§„å¾‹ï¼Œæ³¨é‡å“è´¨ï¼Œå–œæ¬¢å°è¯•æ–°é²œäº‹ç‰©ã€‚å–„äºå¹³è¡¡å·¥ä½œå’Œç”Ÿæ´»ï¼Œå‘¨æœ«å–œæ¬¢å’Œæœ‹å‹èšä¼šæˆ–è¿›è¡Œæˆ·å¤–æ´»åŠ¨ã€‚å¯¹æ—¶å°šæœ‰ä¸€å®šçš„è¿½æ±‚ï¼Œæ³¨é‡ä¸ªäººå½¢è±¡ã€‚',
                socialPreference: 'å–œæ¬¢å’Œæœ‹å‹ä¿æŒè”ç³»ï¼Œç»å¸¸åœ¨æœ‹å‹åœˆåˆ†äº«ç”Ÿæ´»ç‚¹æ»´ã€‚æ³¨é‡æœ‹å‹é—´çš„äº’åŠ¨ï¼Œä¼šç§¯æå›åº”ä»–äººçš„åŠ¨æ€ã€‚å€¾å‘äºä¸å¿—åŒé“åˆçš„äººäº¤å¾€ï¼Œçœ‹é‡çœŸè¯šå’Œé»˜å¥‘ã€‚',
                advice: {
                    topics: [
                        'æ—…è¡Œç»å†ï¼šåˆ†äº«è‡ªå·±çš„æ—…è¡Œæ•…äº‹ï¼Œè¯¢é—®å¯¹æ–¹çš„æ—…è¡Œè®¡åˆ’',
                        'ç¾é£Ÿæ¢ç´¢ï¼šè®¨è®ºå–œæ¬¢çš„ç¾é£Ÿç±»å‹ï¼Œæ¨èå¥½åƒçš„é¤å…',
                        'å¥èº«å¿ƒå¾—ï¼šäº¤æµå¥èº«ç»éªŒå’ŒæŠ€å·§ï¼Œé‚€è¯·ä¸€èµ·è¿åŠ¨',
                        'è¯»ä¹¦æ„Ÿæ‚Ÿï¼šåˆ†äº«æœ€è¿‘è¯»çš„å¥½ä¹¦ï¼Œäº¤æµè¯»ä¹¦å¿ƒå¾—',
                        'æ‘„å½±æŠ€å·§ï¼šè®¨è®ºæ‘„å½±çˆ±å¥½ï¼Œåˆ†äº«å½¼æ­¤çš„ä½œå“'
                    ],
                    dating: [
                        'åˆæ¬¡çº¦ä¼šï¼šé€‰æ‹©ç¯å¢ƒèˆ’é€‚çš„å’–å•¡é¦†æˆ–é¤å…ï¼Œæ°›å›´è½»æ¾æ„‰å¿«',
                        'åç»­çº¦ä¼šï¼šå¯ä»¥å®‰æ’æˆ·å¤–æ´»åŠ¨ï¼Œå¦‚å…¬å›­æ•£æ­¥ã€çˆ¬å±±æˆ–éª‘è¡Œ',
                        'ç‰¹åˆ«å®‰æ’ï¼šæ ¹æ®å¯¹æ–¹å…´è¶£ï¼Œç­–åˆ’ä¸»é¢˜çº¦ä¼šï¼Œå¦‚ç¾é£Ÿä¹‹æ—…æˆ–æ‘„å½±å¤–æ‹',
                        'ç¤¼ç‰©é€‰æ‹©ï¼šå¯ä»¥é€ä¸€æœ¬å¥½ä¹¦ã€ç²¾è‡´çš„å°ç‰©ä»¶æˆ–ä¸å¯¹æ–¹å…´è¶£ç›¸å…³çš„ç¤¼ç‰©'
                    ],
                    communication: [
                        'ç§¯æå€¾å¬ï¼šè®¤çœŸå¬å¯¹æ–¹è¯´è¯ï¼Œç»™äºˆé€‚å½“çš„å›åº”',
                        'åˆ†äº«ç»å†ï¼šä¸»åŠ¨åˆ†äº«è‡ªå·±çš„ç”Ÿæ´»å’Œæƒ³æ³•ï¼Œä¿ƒè¿›å½¼æ­¤äº†è§£',
                        'å¹½é»˜è¡¨è¾¾ï¼šé€‚å½“è¿ç”¨å¹½é»˜ï¼Œå¢åŠ èŠå¤©çš„è¶£å‘³æ€§',
                        'å°Šé‡å·®å¼‚ï¼šç†è§£å¹¶å°Šé‡å¯¹æ–¹çš„è§‚ç‚¹å’Œç”Ÿæ´»æ–¹å¼',
                        'çœŸè¯šèµç¾ï¼šåŠæ—¶è¡¨è¾¾å¯¹å¯¹æ–¹çš„æ¬£èµå’Œèµç¾'
                    ],
                    relationship: 'åŸºäºå¯¹æ–¹çš„æ€§æ ¼ç‰¹ç‚¹å’Œå…´è¶£çˆ±å¥½ï¼Œå»ºè®®é‡‡å–æ¸è¿›å¼çš„å…³ç³»å‘å±•ç­–ç•¥ã€‚ä»æœ‹å‹åšèµ·ï¼Œé€šè¿‡å…±åŒå…´è¶£å»ºç«‹è¿æ¥ï¼Œé€æ­¥åŠ æ·±äº†è§£ã€‚åœ¨é€‚å½“çš„æ—¶å€™è¡¨è¾¾å¥½æ„Ÿï¼Œé¿å…è¿‡äºæ€¥åˆ‡çš„æ€åº¦ã€‚å°Šé‡å¯¹æ–¹çš„èŠ‚å¥ï¼Œç»™å½¼æ­¤è¶³å¤Ÿçš„ç©ºé—´å’Œæ—¶é—´ã€‚'
                }
            };
            
            displayReport(mockData);
        }
        
        // åˆ†äº«æŠ¥å‘Š
        function shareReport(platform) {
            alert(`åˆ†äº«åˆ°${platform}åŠŸèƒ½å¼€å‘ä¸­`);
        }
        
        // ä¿å­˜æŠ¥å‘Š
        function saveReport() {
            alert('ä¿å­˜æŠ¥å‘ŠåŠŸèƒ½å¼€å‘ä¸­');
        }
        
        // é‡ç½®è¡¨å•
        function resetForm() {
            uploadedImages = [];
            updateImageGrid();
            updateImageCount();
            updateAnalyzeButton();
            
            uploadArea.style.display = 'block';
            imageGrid.style.display = 'block';
            document.querySelector('.controls').style.display = 'block';
            analysisSection.style.display = 'none';
            reportSection.style.display = 'none';
        }
    </script>
</body>
</html>